# PEG Scanner 配置文件

# 数据源配置
data_sources:
  primary: yfinance
  fallback:
    - alpha_vantage
    - yahoo_finance
  
  # API配置
  api_keys:
    alpha_vantage: ${ALPHA_VANTAGE_API_KEY}
  
  # 请求配置
  timeout: 30  # 秒
  retry_times: 3
  retry_delay: 2  # 秒

# 策略参数
strategy:
  peg_buy_threshold: 0.8   # PEG < 0.8 买入
  peg_sell_threshold: 1.5  # PEG > 1.5 卖出
  min_profit_usd: 10_000_000  # 最低利润门槛: $10M
  top_n_stocks: 15  # 筛选前N只股票
  
  # 数据质量要求
  validation:
    min_pe: 0
    max_pe: 300
    min_growth_rate: -1.0   # -100%
    max_growth_rate: 5.0    # 500%
    max_peg: 10
    data_deviation_threshold: 0.05  # 5%

# 回测参数
backtest:
  start_date: "2000-01-01"
  end_date: "2025-11-14"
  initial_cash: 100_000
  transaction_cost: 0.001  # 0.1%
  rebalance_freq: "monthly"
  
  # 参数优化范围
  optimization:
    buy_thresholds: [0.5, 0.6, 0.7, 0.8, 0.9, 1.0]
    sell_thresholds: [1.2, 1.5, 1.8, 2.0, 2.5, 3.0]

# ETF成分股
etf_tickers:
  vgt: 
    name: "Vanguard Information Technology ETF"
    approximate_holdings: 330
    data_source: "https://etfdb.com/etf/VGT/#holdings"
  
  kweb:
    name: "KraneShares CSI China Internet ETF"
    approximate_holdings: 50
    data_source: "https://etfdb.com/etf/KWEB/#holdings"
  
  spy:
    name: "SPDR S&P 500 ETF Trust"
    approximate_holdings: 500
    data_source: "https://www.slickcharts.com/sp500"

# 目标股票列表
target_stocks:
  # 美股七姐妹
  mag7_us:
    - ticker: AAPL
      name: "苹果"
    - ticker: MSFT
      name: "微软"
    - ticker: GOOGL
      name: "谷歌"
    - ticker: AMZN
      name: "亚马逊"
    - ticker: NVDA
      name: "英伟达"
    - ticker: META
      name: "Meta"
    - ticker: TSLA
      name: "特斯拉"
  
  # 港股七姐妹
  hk_tech:
    - ticker: "00700.HK"
      name: "腾讯"
    - ticker: "09988.HK"
      name: "阿里巴巴"
    - ticker: "03690.HK"
      name: "美团"
    - ticker: "01810.HK"
      name: "小米"
    - ticker: "09618.HK"
      name: "京东"
    - ticker: "01211.HK"
      name: "比亚迪"
    - ticker: "09999.HK"
      name: "网易"

# 缓存配置
cache:
  enabled: true
  directory: "./cache"
  expiry_hours: 24
  max_size_mb: 1024  # 1GB
  cleanup_interval_days: 7

# 输出配置
output:
  directory: "./results"
  formats:
    - markdown
    - csv
  timestamp: true
  
  # 文件名模板
  templates:
    peg_report: "peg_report_{date}.md"
    backtest_result: "backtest_{ticker}_{date}.csv"
    screening_result: "low_peg_top{n}_{date}.csv"

# 日志配置
logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  
  handlers:
    file:
      enabled: true
      filename: "./logs/peg_scanner.log"
      max_bytes: 10485760  # 10MB
      backup_count: 5
    
    console:
      enabled: true
      colorize: true

# 货币转换率（用于港股）
currency:
  hkd_to_usd: 0.128
  cny_to_usd: 0.14

# 并行处理配置
parallel:
  max_workers: 10
  chunk_size: 50

# 定时任务配置（可选）
scheduler:
  enabled: false
  timezone: "Asia/Shanghai"
  
  jobs:
    - name: "daily_update"
      schedule: "0 8 * * *"  # 每天早上8点
      function: "data_collection.fetch_current_peg:main"
    
    - name: "weekly_screening"
      schedule: "0 9 * * 1"  # 每周一早上9点
      function: "data_collection.screen_low_peg:main"


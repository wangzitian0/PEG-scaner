# Twelve Data vs AkShare å¯¹æ¯”

**ç›®æ ‡**: ä¸ºæ¸¯è‚¡æ‰¾ç¬¬äºŒä¸ªå¯é æ•°æ®æº

---

## ğŸ“Š Twelve Data

### åŸºæœ¬ä¿¡æ¯
- **ç±»å‹**: å®˜æ–¹é‡‘èæ•°æ®API
- **ç½‘ç«™**: https://twelvedata.com/
- **å®šä½**: å…¨çƒå¸‚åœºæ•°æ®

### å…è´¹Tier
```
- 800 API calls/day
- 8 calls/minute
- æ”¯æŒå…¨çƒå¸‚åœºï¼ˆåŒ…æ‹¬æ¸¯è‚¡ï¼‰
- å®æ—¶æ•°æ®å»¶è¿Ÿ15åˆ†é’Ÿ
```

### æ¸¯è‚¡æ”¯æŒ
- âœ… æ”¯æŒæ¸¯è‚¡
- âœ… å®æ—¶ä»·æ ¼
- âœ… åŸºæœ¬é¢æ•°æ®ï¼ˆPE, å¸‚å€¼ç­‰ï¼‰
- âš ï¸ è´¢åŠ¡æ•°æ®å¯èƒ½æœ‰é™

### Python SDK
```python
pip install twelvedata

from twelvedata import TDClient
td = TDClient(apikey="YOUR_API_KEY")

# è·å–è‚¡ç¥¨ä»·æ ¼
ts = td.time_series(
    symbol="0700.HK",
    interval="1day",
    outputsize=5
)

# è·å–åŸºæœ¬é¢æ•°æ®
fundamentals = td.get_statistics(symbol="0700.HK")
```

### ä¼˜ç‚¹
- âœ… å®˜æ–¹APIï¼Œç¨³å®šå¯é 
- âœ… æ”¯æŒæ¸¯è‚¡
- âœ… å…è´¹tierå……è¶³ï¼ˆ800/dayï¼‰
- âœ… æœ‰Python SDK
- âœ… æ–‡æ¡£å®Œå–„

### ç¼ºç‚¹
- âš ï¸ éœ€è¦æ³¨å†Œå’ŒAPI keyï¼ˆä½†å…è´¹ï¼‰
- âš ï¸ è´¢åŠ¡æ•°æ®å¯èƒ½ä¸å¦‚yfinanceè¯¦ç»†
- âš ï¸ å…è´¹tieræœ‰é™é€Ÿï¼ˆ8/minï¼‰

---

## ğŸ“Š AkShare

### åŸºæœ¬ä¿¡æ¯
- **ç±»å‹**: å¼€æºPythonåº“ï¼ˆçˆ¬è™«ï¼‰
- **GitHub**: https://github.com/akfamily/akshare
- **å®šä½**: ä¸­æ–‡é‡‘èå¸‚åœº

### ç‰¹ç‚¹
```
- å®Œå…¨å…è´¹ï¼Œæ— éœ€API key
- ä¸“æ³¨ä¸­æ–‡å¸‚åœºï¼ˆAè‚¡ã€æ¸¯è‚¡ï¼‰
- æ•°æ®ä¸°å¯Œï¼ˆä»·æ ¼ã€è´¢åŠ¡ã€å…¬å¸ä¿¡æ¯ï¼‰
```

### æ¸¯è‚¡æ”¯æŒ
- âœ… æ”¯æŒæ¸¯è‚¡
- âœ… å®æ—¶ä»·æ ¼
- âœ… è´¢åŠ¡æ•°æ®
- âœ… å…¬å¸ä¿¡æ¯

### Pythonä½¿ç”¨
```python
pip install akshare

import akshare as ak

# è·å–æ¸¯è‚¡å®æ—¶æ•°æ®
df = ak.stock_hk_spot_em()

# è·å–ä¸ªè‚¡æ•°æ®
stock_info = ak.stock_hk_daily(symbol="00700", adjust="qfq")

# è·å–è´¢åŠ¡æ•°æ®
# akshareå¯¹æ¸¯è‚¡è´¢åŠ¡æ•°æ®æ”¯æŒæœ‰é™
```

### ä¼˜ç‚¹
- âœ… å®Œå…¨å…è´¹ï¼Œæ— éœ€API key
- âœ… ä¸“æ³¨ä¸­æ–‡å¸‚åœºï¼Œæ¸¯è‚¡æ•°æ®å¥½
- âœ… å¼€æºï¼Œç¤¾åŒºæ´»è·ƒ
- âœ… æ— é™é€Ÿé™åˆ¶

### ç¼ºç‚¹
- âš ï¸ çˆ¬è™«å®ç°ï¼Œå¯èƒ½ä¸ç¨³å®š
- âš ï¸ å¯èƒ½é‡åˆ°åçˆ¬è™«
- âš ï¸ è´¢åŠ¡æ•°æ®ä¸å¦‚yfinanceè¯¦ç»†
- âš ï¸ æ–‡æ¡£ä¸»è¦æ˜¯ä¸­æ–‡

---

## ğŸ¯ æ¨è

### åœºæ™¯1: éœ€è¦ç¨³å®šæ€§ â†’ Twelve Data â­â­â­â­â­

**ç†ç”±**:
- å®˜æ–¹APIï¼Œé•¿æœŸç¨³å®š
- å…è´¹tierå……è¶³ï¼ˆ800/dayï¼Œæˆ‘ä»¬åªéœ€è¦14æ¬¡ï¼‰
- å’Œfinnhubç±»ä¼¼ï¼Œéƒ½æ˜¯å®˜æ–¹API
- ä¸ä¼šé‡åˆ°åçˆ¬è™«é—®é¢˜

**ç¼ºç‚¹**:
- éœ€è¦æ³¨å†Œï¼ˆ2åˆ†é’Ÿï¼‰
- é™é€Ÿ8/minï¼ˆæ¯”finnhubæ…¢ï¼‰

### åœºæ™¯2: å®Œå…¨å…è´¹æ— æ³¨å†Œ â†’ AkShare â­â­â­â­

**ç†ç”±**:
- æ— éœ€API key
- ç«‹å³å¯ç”¨
- ä¸“æ³¨ä¸­æ–‡å¸‚åœº

**ç¼ºç‚¹**:
- çˆ¬è™«å®ç°ï¼Œå¯èƒ½é‡åˆ°é—®é¢˜
- å’Œinvestpyç±»ä¼¼çš„é£é™©

---

## ğŸ’¡ æˆ‘çš„å»ºè®®

**æ¨è Twelve Data** â­â­â­â­â­

### ç†ç”±

1. **å’Œç°æœ‰æ¶æ„ä¸€è‡´**
   ```
   yfinance  (çˆ¬è™«)     + 
   finnhub   (å®˜æ–¹API)  + 
   twelvedata (å®˜æ–¹API) â† éƒ½æ˜¯å¯é çš„
   ```

2. **é¿å…é‡è¹ˆè¦†è¾™**
   - investpy: çˆ¬è™« â†’ 403é”™è¯¯
   - akshare: çˆ¬è™« â†’ å¯èƒ½ä¹Ÿ403
   - twelvedata: å®˜æ–¹API â†’ ç¨³å®š

3. **å…è´¹tierå……è¶³**
   ```
   æˆ‘ä»¬çš„ä½¿ç”¨:
   - 14åªè‚¡ç¥¨
   - æ¯åªçº¦3æ¬¡è°ƒç”¨
   - æ€»å…±çº¦42æ¬¡/å¤©
   - twelvedata: 800æ¬¡/å¤© âœ… å®Œå…¨å¤Ÿç”¨
   ```

4. **æ¸¯è‚¡è¦†ç›–**
   - twelvedataæ”¯æŒæ¸¯è‚¡ âœ…
   - æœ‰PEç­‰åŸºæœ¬é¢æ•°æ® âœ…

### é¢„æœŸç»“æœ

```
ç¾è‚¡:
- yfinance âœ… + finnhub âœ… + twelvedata âœ…
â†’ 3æºéªŒè¯ â†’ 7æ¡

æ¸¯è‚¡:
- yfinance âœ… + finnhub âŒ + twelvedata âœ…
â†’ 2æºéªŒè¯ â†’ 4-7æ¡

æ€»è®¡: 11-14æ¡ (å…¨éƒ¨éƒ½æ˜¯2æºä»¥ä¸ŠéªŒè¯)
```

---

## ğŸ”§ å®æ–½è®¡åˆ’

### 1. æ³¨å†ŒTwelve Data (2åˆ†é’Ÿ)
```
è®¿é—®: https://twelvedata.com/
æ³¨å†Œ â†’ è·å–å…è´¹API key
è®¾ç½®ç¯å¢ƒå˜é‡: export TWELVE_DATA_API_KEY="your_key"
```

### 2. å®ç°fetch_twelvedata.py (15åˆ†é’Ÿ)
```python
# ä»¿ç…§fetch_finnhub.pyçš„ç»“æ„
# å®ç°è·å–ä»·æ ¼ã€PEã€è´¢åŠ¡æ•°æ®
# åº”ç”¨ValidationRuleséªŒè¯
```

### 3. æ›´æ–°fetch_three_sources.py (5åˆ†é’Ÿ)
```python
# æ›¿æ¢investpyä¸ºtwelvedata
yf_data = fetch_yf(ticker)
fh_data = fetch_fh(ticker)
td_data = fetch_td(ticker)  # â† æ–°çš„

# ä¸¥æ ¼éªŒè¯é€»è¾‘
if len(valid_sources) >= 2:
    if at_least_two_consistent(sources):
        return aggregated
```

### 4. è¿è¡Œå®Œæ•´é‡‡é›† (2åˆ†é’Ÿ)
```bash
FINNHUB_TOKEN=$FINNHUB_TOKEN \
TWELVE_DATA_API_KEY=$TWELVE_DATA_API_KEY \
python data_collection/fetch_three_sources_strict.py
```

**æ€»è€—æ—¶**: çº¦25åˆ†é’Ÿ

---

## âœ… å†³ç­–

**ä½¿ç”¨ Twelve Data** â­â­â­â­â­

åŸå› :
1. å®˜æ–¹APIï¼Œç¨³å®šå¯é 
2. å…è´¹tierå……è¶³
3. æ”¯æŒæ¸¯è‚¡
4. å’Œfinnhubç±»ä¼¼ï¼Œéƒ½æ˜¯å®˜æ–¹API
5. é¿å…çˆ¬è™«çš„åçˆ¬è™«é—®é¢˜

**ä¸‹ä¸€æ­¥**: æ³¨å†ŒTwelve Dataå¹¶é›†æˆ

# Phase 2: Backtest Engine - è®¡åˆ’

**é˜¶æ®µ**: Phase 2  
**çŠ¶æ€**: ğŸ“ è®¡åˆ’ä¸­  
**ç›®æ ‡**: å®ç°åŸºäºPEGçš„å›æµ‹å¼•æ“

---

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

1. è·å–å†å²æ•°æ®ï¼ˆ2000-2025æœˆåº¦æ•°æ®ï¼‰
2. å®ç°PEGå›æµ‹ç­–ç•¥ï¼ˆä¹°å…¥/å–å‡ºè§„åˆ™ï¼‰
3. è®¡ç®—å¹´åŒ–æ”¶ç›Šç‡
4. å›æµ‹ SP500, VGT, KWEB ETF
5. æ·»åŠ ç¬¬ä¸‰æ•°æ®æºï¼ˆå®Œæˆä¸‰æºéªŒè¯ï¼‰

---

## ğŸ“‹ åŠŸèƒ½éœ€æ±‚

### 1. å†å²æ•°æ®è·å–

#### æ•°æ®å†…å®¹
- [ ] æœˆåº¦å¼€ç›˜ä»·ï¼ˆ2000-2025ï¼‰
- [ ] æœˆåº¦ PEG è®¡ç®—
- [ ] æœˆåº¦è´¢åŠ¡æ•°æ®ï¼ˆPE, åˆ©æ¶¦, å¢é€Ÿï¼‰

#### ç›®æ ‡è‚¡ç¥¨
- [ ] è…¾è®¯ (00700.HK)
- [ ] å¾®è½¯ (MSFT)
- [ ] äºšé©¬é€Š (AMZN)
- [ ] SP500 ETF (^GSPC)
- [ ] VGT ETF
- [ ] KWEB ETF

---

### 2. å›æµ‹ç­–ç•¥

#### äº¤æ˜“è§„åˆ™
- [ ] PEG < X â†’ ä¹°å…¥
- [ ] PEG > Y â†’ å–å‡º
- [ ] åˆå§‹èµ„é‡‘ï¼š$10,000
- [ ] äº¤æ˜“æˆæœ¬ï¼šè€ƒè™‘æ‰‹ç»­è´¹

#### æ€§èƒ½æŒ‡æ ‡
- [ ] æ€»æ”¶ç›Šç‡
- [ ] å¹´åŒ–æ”¶ç›Šç‡
- [ ] æœ€å¤§å›æ’¤
- [ ] å¤æ™®æ¯”ç‡
- [ ] èƒœç‡

---

### 3. VGT + KWEB å®Œæ•´åˆ—è¡¨

#### ç­›é€‰æ¡ä»¶
- [ ] åˆ©æ¶¦ > $10M USD
- [ ] PEG æœ€ä½çš„ 15 å®¶å…¬å¸
- [ ] åŒ…å«ç¾è‚¡å’Œä¸­æ¦‚è‚¡

#### æ•°æ®å±•ç¤º
- [ ] å…¬å¸åã€åˆ©æ¶¦ã€å¢é€Ÿã€PEã€PEG
- [ ] æ’åºï¼šPEG ä»ä½åˆ°é«˜
- [ ] æ ¼å¼ï¼šMarkdown + CSV

---

### 4. ç¬¬ä¸‰æ•°æ®æº

#### å€™é€‰æ–¹æ¡ˆ
- [ ] Financial Modeling Prep (å…è´¹å±‚)
- [ ] Finnhub (å…è´¹å±‚)
- [ ] IEX Cloud (å…è´¹å±‚)
- [ ] Yahoo Finance (å¤‡ç”¨API)

#### ä¸‰æºéªŒè¯
- [ ] ä¸‰ä¸ªæ•°æ®æºåŒæ—¶è·å–
- [ ] è‡³å°‘ä¸¤ä¸ªç›¸åŒæ‰é‡‡ç”¨
- [ ] ç½®ä¿¡åº¦è¯„åˆ†å‡çº§

---

## ğŸ—ï¸ æŠ€æœ¯æ–¹æ¡ˆ

### æ¶æ„è®¾è®¡

```
å›æµ‹æµç¨‹:
1. å†å²æ•°æ®è·å– â†’ backtest/fetch_historical.py
2. PEG è®¡ç®— â†’ backtest/calculate_peg.py
3. äº¤æ˜“ä¿¡å·ç”Ÿæˆ â†’ backtest/strategy.py
4. å›æµ‹å¼•æ“ â†’ backtest/engine.py
5. æ€§èƒ½åˆ†æ â†’ backtest/performance.py
6. æŠ¥å‘Šç”Ÿæˆ â†’ backtest/report.py
```

### æ•°æ®ç»“æ„

```python
@dataclass
class BacktestResult:
    ticker: str
    start_date: datetime
    end_date: datetime
    initial_capital: float
    final_value: float
    total_return: float
    annualized_return: float
    max_drawdown: float
    sharpe_ratio: float
    trades: List[Trade]
```

---

## ğŸ“¦ äº¤ä»˜ç‰©

### ä»£ç æ¨¡å—
- [ ] `backtest/fetch_historical.py` - å†å²æ•°æ®è·å–
- [ ] `backtest/calculate_peg.py` - PEG è®¡ç®—
- [ ] `backtest/strategy.py` - äº¤æ˜“ç­–ç•¥
- [ ] `backtest/engine.py` - å›æµ‹å¼•æ“
- [ ] `backtest/performance.py` - æ€§èƒ½åˆ†æ
- [ ] `backtest/report.py` - æŠ¥å‘Šç”Ÿæˆ
- [ ] `data_collection/fetch_third_source.py` - ç¬¬ä¸‰æ•°æ®æº

### æµ‹è¯•ä»£ç 
- [ ] `tests/test_backtest_engine.py`
- [ ] `tests/test_strategy.py`
- [ ] `tests/test_performance.py`

### æ–‡æ¡£
- [ ] `backtest/README.md` (æ›´æ–°)
- [ ] `docs/phases/phase_2_backtest/CHECKLIST.md`
- [ ] `docs/phases/phase_2_backtest/SUMMARY.md`

### æ•°æ®ç»“æœ
- [ ] `data/results/backtest_*.md`
- [ ] `data/results/backtest_*.csv`
- [ ] `data/results/vgt_kweb_top15.md`

---

## ğŸ“Š æˆåŠŸæŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | çŠ¶æ€ |
|------|------|------|
| æ•°æ®æºæ•°é‡ | â‰¥3 | ğŸ“ |
| å†å²æ•°æ®è·¨åº¦ | 2000-2025 | ğŸ“ |
| å›æµ‹è‚¡ç¥¨æ•° | â‰¥6 | ğŸ“ |
| æµ‹è¯•è¦†ç›–ç‡ | â‰¥50% | ğŸ“ |
| VGT+KWEBåˆ—è¡¨ | 15å®¶ | ğŸ“ |

---

## ğŸ”„ ä¾èµ–

### Phase 1 å®Œæˆé¡¹
- âœ… æ•°æ®é‡‡é›†æ¡†æ¶
- âœ… æ•°æ®éªŒè¯ä½“ç³»
- âœ… åŒæ•°æ®æºæ”¯æŒ
- âœ… ç¼“å­˜ç®¡ç†
- âœ… æµ‹è¯•å¥—ä»¶åŸºç¡€

### Phase 2 æ–°å¢
- [ ] å†å²æ•°æ®å¤„ç†
- [ ] å›æµ‹å¼•æ“
- [ ] æ€§èƒ½åˆ†æ
- [ ] ç¬¬ä¸‰æ•°æ®æº

---

## ğŸ“… æ—¶é—´è®¡åˆ’

**é¢„è®¡æ—¶é—´**: 2-3å¤©

- **Day 1**: å†å²æ•°æ®è·å– + ç¬¬ä¸‰æ•°æ®æº
- **Day 2**: å›æµ‹å¼•æ“ + äº¤æ˜“ç­–ç•¥
- **Day 3**: æ€§èƒ½åˆ†æ + æŠ¥å‘Šç”Ÿæˆ + æµ‹è¯•

---

## ğŸš€ å¼€å§‹æ¡ä»¶

- âœ… Phase 1 å®Œæˆ
- âœ… æ•°æ®é‡‡é›†ç³»ç»Ÿç¨³å®šè¿è¡Œ
- âœ… æµ‹è¯•å¥—ä»¶å®Œå–„

**çŠ¶æ€**: âœ… å¯ä»¥å¼€å§‹

---

**ç›¸å…³æ–‡æ¡£**:
- [Phase 1 æ€»ç»“](../phase_1_data_collection/SUMMARY.md)
- [é¡¹ç›®README](../../../README.md)
- [å›æµ‹æ¨¡å—README](../../../backtest/README.md)


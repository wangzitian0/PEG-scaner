# PRD-003: 个股页面（对应 BRN-003）

## 1. 产品目标
提供美股单只股票的一站式信息视图，支持行情查看、新闻阅读、财务分析，参考 moomoo 体验。

## 2. 目标用户
- **终端投资者**：散户、个人投资者，快速了解股票基本面
- **量化用户**：需要数据接口与因子计算入口
- **设备**：移动端优先（React Native），Web 兼顾（响应式）

## 3. 核心场景

### 场景 1：查看 K 线走势
**触发**：用户在首页搜索 AAPL 并点击  
**步骤**：
1. 进入个股页，默认显示日 K 线（最近 30 天）
2. 点击「周/月」按钮切换周期
3. 双指缩放查看不同时间窗口

**期望结果**：K 线图流畅渲染，成交量柱状图同步显示

### 场景 2：阅读相关新闻
**触发**：用户向下滚动至新闻区  
**步骤**：
1. 查看标题列表（显示来源、时间）
2. 点击标题跳转外部浏览器/WebView

**期望结果**：至少显示 1 条新闻，无新闻显示「暂无相关新闻」

### 场景 3：分析财务指标
**触发**：用户点击「F10」Tab  
**步骤**：
1. 展开「估值」模块，查看 PE/PS/PB
2. 展开「关键指标」，查看 EPS/FCF/ROE

**期望结果**：数据展示清晰，缺失数据显示「--」

## 4. 界面设计

### 4.1 布局（移动端）
```
+---------------------------+
| Header                    |
| AAPL | Apple Inc          |
+---------------------------+
| K 线图 + 成交量            |
| [日 | 周 | 月] 切换       |
+---------------------------+
| 新闻列表（滚动）           |
|  📰 标题1  来源  时间     |
|  📰 标题2  来源  时间     |
+---------------------------+
| F10 模块（手风琴）         |
|  > 估值 (Valuation)       |
|  > 关键指标 (Indicators)  |
+---------------------------+
```

### 4.2 交互规范
- **K 线周期切换**：Tab 高亮当前选中，切换时显示 Loading
- **新闻列表**：支持下拉刷新，点击跳转
- **F10 折叠面板**：默认全部折叠，点击展开/收起
- **加载状态**：骨架屏（Skeleton）+ Spinner
- **错误提示**：数据缺失显示占位文本，网络错误显示重试按钮

### 4.3 视觉规范
- **字体**：标题 18sp，正文 14sp，辅助 12sp
- **颜色**：涨红跌绿（中国区），涨绿跌红（美国区，可配置）
- **间距**：卡片间距 16dp，内容间距 12dp

## 5. 数据需求

### 5.1 数据字段
| 数据类型 | 字段 | 来源 | 更新频率 |
|---------|------|------|---------|
| 基础信息 | symbol, name, exchange | Neo4j | 静态 |
| 日 K 线 | OHLCV (open/high/low/close/volume) | yfinance | T+1 |
| 新闻 | title, url, source, publishedAt | Alpha Vantage | 实时 |
| 估值 | PE, PS, PB | 财报计算 | 季度 |
| 指标 | EPS, FCF, ROE | 财报提取 | 季度 |

### 5.2 数据质量（参考 DRD-001）
- **多源校验**：≥3 来源一致才入库
- **置信度**：低置信度数据显示警告标识
- **时效性**：T+1 数据 D+0 完成率 >95%

## 6. 非功能性需求

### 6.1 性能
- **首屏加载**：< 2 秒（4G 网络）
- **K 线渲染**：≥ 30fps（300+ 数据点）
- **新闻列表**：虚拟滚动（>100 条）

### 6.2 可用性
- **离线缓存**：最近查看的 3 支股票
- **搜索历史**：保存最近 10 次搜索

### 6.3 可访问性
- **屏幕阅读器**：支持 VoiceOver (iOS) 和 TalkBack (Android)
- **对比度**：WCAG AA 级别

## 7. 验收标准
- ✅ 页面加载返回 200，无 GraphQL errors
- ✅ K 线图渲染正常（至少 30 个数据点）
- ✅ 新闻列表显示至少 1 条（或「暂无」占位）
- ✅ F10 模块可展开/折叠
- ✅ 回归测试 `nx run regression:web-e2e` 通过
- ✅ 移动端适配（iPhone SE + iPad）

## 8. 后续迭代
- [ ] 支持分时图（1 分钟粒度）
- [ ] 新闻情感分析标签（正面/负面）
- [ ] F10 数据导出（CSV/PDF）
- [ ] 股票对比功能（多股票并排）
- [ ] 添加因子计算入口（跳转 PRD-004）

## 9. 参考文档
- [BRN-003: 个股页面决策](../../origin/BRN-003.single_stock_page.md)
- [TRD-003: 个股页面技术设计](../tech/TRD-003.single_stock_tech.md)
- [PRD-000: 产品整体概览](./PRD-000.stock_app_overview.md)


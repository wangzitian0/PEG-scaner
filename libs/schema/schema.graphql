# GraphQL Schema (SSOT)
# Auto-generated by merge_schema.py at 2025-11-30T07:06:47.515811
# DO NOT EDIT DIRECTLY - modify domain files in common/, market/, news/

# === COMMON: types.graphql ===
# common/types.graphql - 通用类型定义
# 命名约定：无前缀，基础类型

"""
Ping/health check for infra connectivity.
"""
type Ping {
  message: String!
  agent: String!
  timestampMs: Float!
}

"""
Standard pagination input.
"""
input PaginationInput {
  limit: Int = 20
  offset: Int = 0
}

"""
Standard pagination info for responses.
"""
type PaginationInfo {
  total: Int!
  limit: Int!
  offset: Int!
  hasMore: Boolean!
}

# === NEWS: news.graphql ===
# news/news.graphql - 新闻域
# 命名约定：News* 前缀

"""
News article item.
"""
type NewsItem {
  title: String!
  url: String
  source: String
  publishedAt: Float
}

# === MARKET: market.graphql ===
# market/market.graphql - 市场/股票域
# 命名约定：Asset* 前缀（区分其他域）

"""
PEG watchlist candidate entry.
"""
type PegStock {
  symbol: String!
  name: String!
  peRatio: Float
  earningsGrowth: Float
  pegRatio: Float
}

"""
Company valuation metrics.
"""
type CompanyValuation {
  psRatio: Float
  peRatio: Float
  pbRatio: Float
}

"""
Financial performance indicators.
"""
type FinancialIndicators {
  eps: Float
  fcf: Float
  currentRatio: Float
  roe: Float
}

"""
Detailed company information.
"""
type CompanyInfo {
  symbol: String!
  description: String
  sector: String
  industry: String
  valuation: CompanyValuation
  indicators: FinancialIndicators
}

"""
Stock entity with metadata.
"""
type Stock {
  symbol: String!
  name: String!
  exchange: String
  currency: String
  companyInfo: CompanyInfo
}

"""
K-line (OHLCV) data point.
"""
type KLinePoint {
  timestamp: Float!
  open: Float
  high: Float
  low: Float
  close: Float
  volume: Float
}

"""
Single stock page aggregated data.
"""
type SingleStockPage {
  stock: Stock!
  dailyKline: [KLinePoint!]!
  news: [NewsItem!]!
}

# === ROOT: query.graphql ===
# query.graphql - Root Query 定义
# 聚合所有域的查询入口

type Query {
  """
  Health check / infrastructure ping.
  """
  ping: Ping!

  """
  List PEG watchlist candidates.
  """
  pegStocks: [PegStock!]!

  """
  Fetch single stock page data by symbol.
  """
  singleStock(symbol: String!): SingleStockPage
}

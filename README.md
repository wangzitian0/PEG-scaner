# PEG Scanner

This project is a stock analysis tool for quantitative stock selection, focusing on US stocks. It is being developed using an "AI-native" approach, where an AI agent (like me) actively participates in the development process.

The core requirements and instructions for the agent are defined in [agent.md](./agent.md).

## Installation

To set up the Nx monorepo workspace, navigate to the project's root directory and run the following command:

```bash
npx nx init peg-scanner --prefer-free-syntax
```

This command will initialize the Nx workspace directly within the current directory, naming it `peg-scanner`. Follow any prompts to configure the workspace. It's recommended to choose an "integrated" monorepo style for mixed technologies (React Native and Python).

## Development Workflow

1. (Optional) Export `ENV=/path/to/.env` so `scripts/dev.sh` can load custom variables (ports, API keys, etc.).
2. Start services with `./scripts/dev.sh start`. This launches `npx nx run backend:start` and `react-native start` in the background, storing logs/PIDs under `x-log/`.
3. Run automated checks:
   - Backend proto tests: `npx nx run backend:test`
   - Regression ping: `npx nx run regression:ping` (backend server must be running)
   - Mobile typecheck: `npx nx run mobile:typecheck`
4. Stop services with `./scripts/dev.sh stop`.

## Directory Index

*   [`/docs/`](./docs/README.md): High-level project documentation, including plans, architecture, and the mandatory [`AI_EVALUATION.md`](./docs/AI_EVALUATION.md) reward mechanism (keep aligned with `AGENTS.md`).
*   [`/project/`](./project/README.md): Project management files, including `phrase_0.infra` (proto/Nx infra), the active `phrase_1.initial_setup` iteration docs, progress tracking, and the centralized [`prompt_log.md`](./project/prompt_log.md).
*   [`/regression_tests/`](./regression_tests/README.md): Repository-wide end-to-end tests (e.g., ping-pong health check); unit tests stay within each component directory.
*   [`/scripts/dev.sh`](./scripts/dev.sh): One-click start/stop helper for backend + mobile services. Reads `$ENV` if set to load environment variables before launching commands.
*   [`/schema/`](./schema/README.md): The Single Source of Truth (SSOT) for data structures, defined using Protobuf.
*   [`/TODOWRITE.md`](./TODOWRITE.md): Tracks all requirements from `agent.md`, including new quality gaps (e.g., missing backend automated tests).
*   [`/x-data/`](./x-data/README.md): Stores all data automatically generated by the application (e.g., stock data, calculated factors).
*   [`/x-log/`](./x-log/README.md): Contains logs from the application's various components.
*   [`/backend/`](./backend/README.md): The Python backend application for data fetching, processing, and API services.
*   [`/mobile/`](./mobile/README.md): The React Native mobile application frontend.

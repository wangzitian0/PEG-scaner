# PEG Scanner

This project is a stock analysis tool for quantitative stock selection, focusing on US stocks. It is being developed using an "AI-native" approach, where an AI agent (like me) actively participates in the development process.

The core requirements and instructions for the agent are defined in [agent.md](./agent.md).

## Installation

To set up the Nx monorepo workspace, navigate to the project's root directory and run the following command:

```bash
npx nx init peg-scanner --prefer-free-syntax
```

This command will initialize the Nx workspace directly within the current directory, naming it `peg-scanner`. Follow any prompts to configure the workspace. It's recommended to choose an "integrated" monorepo style for mixed technologies (React Native and Python).

## Development Workflow

1. (Optional) Export `ENV=/path/to/.env` so `tools/dev.sh` can load custom variables (ports, API keys, etc.).
2. Start services with `./tools/dev.sh start`. This launches `npx nx run backend:start` and `react-native start` in the background, storing logs/PIDs under `x-log/`.
3. Run automated checks:
   - Backend proto tests: `npx nx run backend:test`
   - Regression ping: `npx nx run regression:ping` (backend server must be running)
   - Mobile typecheck: `npx nx run mobile:typecheck`
4. Stop services with `./tools/dev.sh stop`.

## Directory Index

*   [`/docs/`](./docs/README.md): High-level project documentation, including plans, architecture, and the mandatory [`AI_EVALUATION.md`](./docs/AI_EVALUATION.md) reward mechanism (keep aligned with `AGENTS.md`).
*   [`/apps/`](./apps/README.md): Runtime applications (backend API, mobile client, regression utilities) managed by Nx.
*   [`/docs/`](./docs/README.md): High-level documentation, including [`AI_EVALUATION.md`](./docs/AI_EVALUATION.md), phase folders (`./docs/project/`), and the stage tracker [`docs/TODOWRITE.md`](./docs/TODOWRITE.md).
*   [`/libs/schema/`](./libs/schema/README.md): The Single Source of Truth (SSOT) for data structures, defined using Protobuf.
*   [`/tools/`](./tools/README.md): Automation helpers such as [`tools/dev.sh`](./tools/dev.sh) for starting/stopping services with env injection.
*   [`/x-data/`](./x-data/README.md): Stores all data automatically generated by the application (e.g., stock data, calculated factors).
*   [`/x-log/`](./x-log/README.md): Contains logs from the application's various components.
*   [`PRD.md`](./PRD.md): Product requirements + functional backlog.
*   [`AGENTS.md`](./AGENTS.md): SOP/checklists and workflow guardrails for every agent.

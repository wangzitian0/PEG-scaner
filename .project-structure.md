# é¡¹ç›®ç»“æ„å¿«é€Ÿå‚è€ƒ

## ğŸ“‹ æ ¸å¿ƒåŸåˆ™

1. **SSOT (Single Source of Truth)** - æœ¬è´¨ç›¸åŒçš„ä¸œè¥¿æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹
2. **æ•°æ®æŒä¹…åŒ–** - ä¸­é—´è¿‡ç¨‹å…¨éƒ¨ä¿å­˜ï¼Œä¾¿äºè°ƒè¯•

---

## ğŸ“ ç›®å½•ç»“æ„

```
PEG-scaner/
â”œâ”€â”€ ğŸ“„ README.md              # é¡¹ç›®æ¦‚è§ˆï¼ˆæŒ‡å‘docs/ï¼‰
â”œâ”€â”€ ğŸ“„ agent.md               # ç³»ç»Ÿè®¾è®¡ï¼ˆæ ¸å¿ƒï¼‰
â”œâ”€â”€ ğŸ“„ config.yaml            # å•ä¸€é…ç½®æº
â”œâ”€â”€ ğŸ“„ pyproject.toml         # ä¾èµ–å®šä¹‰ï¼ˆå”¯ä¸€ï¼‰
â”‚
â”œâ”€â”€ ğŸ“š docs/                  # æ‰€æœ‰æ–‡æ¡£ï¼ˆSSOTï¼‰
â”‚   â”œâ”€â”€ README.md             # å®Œæ•´æ–‡æ¡£
â”‚   â”œâ”€â”€ QUICKSTART.md         # å¿«é€Ÿå…¥é—¨
â”‚   â”œâ”€â”€ REQUIREMENTS.md       # åŸå§‹éœ€æ±‚
â”‚   â””â”€â”€ REFACTORING.md        # é‡æ„è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ’¾ data/                  # æ‰€æœ‰æ•°æ®ï¼ˆæŒä¹…åŒ–ï¼‰
â”‚   â”œâ”€â”€ raw/                  # APIåŸå§‹å“åº”ï¼ˆ7å¤©ï¼‰
â”‚   â”œâ”€â”€ processed/            # å¤„ç†åæ•°æ®ï¼ˆ30å¤©ï¼‰
â”‚   â”œâ”€â”€ cache/                # ç¼“å­˜ï¼ˆ24å°æ—¶ï¼‰
â”‚   â”œâ”€â”€ results/              # æœ€ç»ˆç»“æœï¼ˆæ°¸ä¹…ï¼‰
â”‚   â””â”€â”€ logs/                 # Pipelineæ—¥å¿—ï¼ˆ90å¤©ï¼‰
â”‚
â”œâ”€â”€ ğŸ§  core/                  # æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ schemas/              # Schemaå®šä¹‰ï¼ˆSSOTï¼‰
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ format_utils.py
â”‚   â””â”€â”€ data_persistence.py   # æŒä¹…åŒ–å·¥å…·
â”‚
â”œâ”€â”€ ğŸ“¡ data_collection/       # æ•°æ®é‡‡é›†
â”‚   â”œâ”€â”€ fetch_yfinance.py     # ä¸»æ•°æ®æº
â”‚   â”œâ”€â”€ fetch_alpha_vantage.py # å¤‡ç”¨æ•°æ®æº
â”‚   â”œâ”€â”€ data_aggregator.py    # åŒæºéªŒè¯
â”‚   â””â”€â”€ fetch_current_peg.py  # ä¸ƒå§å¦¹PEG
â”‚
â”œâ”€â”€ ğŸ“ˆ backtest/              # å›æµ‹å¼•æ“ï¼ˆPhase 2ï¼‰
â””â”€â”€ ğŸ§ª tests/                 # æµ‹è¯•å¥—ä»¶
```

---

## ğŸš€ å¿«é€Ÿå‘½ä»¤

### æ•°æ®é‡‡é›†
```bash
# è·å–ä¸ƒå§å¦¹PEGæ•°æ®
uv run python data_collection/fetch_current_peg.py

# æŸ¥çœ‹ç»“æœ
cat data/results/mag7_peg_*.md
```

### æµ‹è¯•
```bash
# è¿è¡Œæµ‹è¯•
uv run pytest tests/ -v

# æŸ¥çœ‹è¦†ç›–ç‡
uv run pytest tests/ --cov --cov-report=html
open htmlcov/index.html
```

### æ•°æ®ç®¡ç†
```bash
# æŸ¥çœ‹æ•°æ®ç›®å½•
ls -lh data/*

# æ¸…ç†ç¼“å­˜
rm -rf data/cache/*.json

# æŸ¥çœ‹å¤„ç†æ—¥å¿—
cat data/logs/pipeline_*.jsonl | jq .
```

---

## ğŸ“– æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| [README.md](README.md) | é¡¹ç›®æ¦‚è§ˆ |
| [docs/README.md](docs/README.md) | å®Œæ•´æ–‡æ¡£ï¼ˆPEGåŸç†ï¼‰ |
| [docs/QUICKSTART.md](docs/QUICKSTART.md) | å¿«é€Ÿå…¥é—¨ |
| [docs/REFACTORING.md](docs/REFACTORING.md) | é‡æ„è¯¦æƒ… |
| [agent.md](agent.md) | ç³»ç»Ÿè®¾è®¡ |
| [data/README.md](data/README.md) | æ•°æ®ç®¡ç† |

---

## ğŸ¯ è®¾è®¡è¦ç‚¹

### SSOTå®è·µ
- âœ… æ‰€æœ‰æ–‡æ¡£åœ¨ `docs/`
- âœ… æ‰€æœ‰æ•°æ®åœ¨ `data/`
- âœ… Schemaåœ¨ `core/schemas/`
- âœ… é…ç½®åœ¨ `config.yaml`

### æ•°æ®æŒä¹…åŒ–
- âœ… 5çº§æ•°æ®å­˜å‚¨ï¼ˆraw â†’ processed â†’ cache â†’ results + logsï¼‰
- âœ… Pipelineå®Œæ•´è¿½è¸ª
- âœ… è‡ªåŠ¨æ¸…ç†ç­–ç•¥

---

**å¿«é€Ÿå¼€å§‹**ï¼š`cat README.md`

